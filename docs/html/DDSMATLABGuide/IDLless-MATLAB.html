<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>5. MATLAB without IDL &mdash; The Vortex OpenSplice MATLAB Guide</title>
    
    <link rel="stylesheet" href="_static/vortex.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '6.x',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="The Vortex OpenSplice MATLAB Guide" href="index.html" />
    <link rel="next" title="6. QoS Provider" href="qos_provider.html" />
    <link rel="prev" title="4. MATLAB Generation from IDL" href="IDL-MATLAB.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="qos_provider.html" title="6. QoS Provider"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="IDL-MATLAB.html" title="4. MATLAB Generation from IDL"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">OpenSplice MATLAB Guide</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="matlab-without-idl">
<span id="id1"></span><h1>5. MATLAB without IDL<a class="headerlink" href="#matlab-without-idl" title="Permalink to this headline">¶</a></h1>
<p>It is possible, but not recommended, to directly create MATLAB classes that represent DDS topics.
This approach allows you to quickly start using Vortex DDS, but it has a number of disadvantages:</p>
<ul class="simple">
<li>without IDL, you cannot reliably define the topic in other language bindings.</li>
<li>not all IDL types are available.</li>
</ul>
<div class="section" id="creating-a-matlab-topic-class">
<h2>5.1. Creating a MATLAB Topic class<a class="headerlink" href="#creating-a-matlab-topic-class" title="Permalink to this headline">¶</a></h2>
<p>To create a Topic Class without IDL, create a MATLAB class that inherits from Vortex.AbstractType.
The class will be interpreted as an IDL struct.
Class properties will be interpreted as IDL struct fields.
Finally, the class must define a static method <cite>getKey</cite> which returns a comma separated list of key
fields for the topic.</p>
<p>The following shows a simple MATLAB class, ShapeType:</p>
<div class="highlight-python"><div class="highlight"><pre>classdef ShapeType &lt; Vortex.AbstractType
    properties
        color     char  % IDL: string color;
        x         int32 % IDL: long x;
        y         int32 % IDL: long y;
        shapesize int32 % IDL: long shapesize;
    end

    methods (Static)
        function keys = getKey
            keys = &#39;color&#39;;
        end
    end
end
</pre></div>
</div>
<p>The topic class defines four fields, and identifies the <tt class="docutils literal"><span class="pre">color</span></tt> field as the topic key.</p>
<p>You would use the topic class in the same way as one generated by IDLPP. The following example
shows the creation of a DDS topic object from a topic class:</p>
<div class="highlight-python"><div class="highlight"><pre>% define a Vortex DDS topic called &#39;Circle&#39;
circleTopic = Vortex.Topic(&#39;Circle&#39;, ?ShapeType);
</pre></div>
</div>
<p>With the <cite>circleTopic</cite> variable, you can then create appropriate Vortex DDS readers and writers.</p>
</div>
<div class="section" id="mapping-of-matlab-types-to-idl-types">
<h2>5.2. Mapping of MATLAB types to IDL types<a class="headerlink" href="#mapping-of-matlab-types-to-idl-types" title="Permalink to this headline">¶</a></h2>
<p>When using an IDL-less Topic class, the Vortex DDS API for MATLAB makes maps property types
to IDL types as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">MATLAB Type</th>
<th class="head">IDL Type</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>logical</td>
<td>boolean</td>
</tr>
<tr class="row-odd"><td>int8</td>
<td>char</td>
</tr>
<tr class="row-even"><td>uint8</td>
<td>octet</td>
</tr>
<tr class="row-odd"><td>int16</td>
<td>short</td>
</tr>
<tr class="row-even"><td>uint16</td>
<td>unsigned short</td>
</tr>
<tr class="row-odd"><td>int32</td>
<td>long</td>
</tr>
<tr class="row-even"><td>uint32</td>
<td>unsigned long</td>
</tr>
<tr class="row-odd"><td>int64</td>
<td>long long</td>
</tr>
<tr class="row-even"><td>uint64</td>
<td>unsigned long long</td>
</tr>
<tr class="row-odd"><td>single</td>
<td>float</td>
</tr>
<tr class="row-even"><td>double</td>
<td>double</td>
</tr>
<tr class="row-odd"><td>char</td>
<td>string</td>
</tr>
<tr class="row-even"><td>class</td>
<td>equivalent IDL struct</td>
</tr>
<tr class="row-odd"><td>enum class</td>
<td>equivalent IDL enum</td>
</tr>
<tr class="row-even"><td>not type</td>
<td>double</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="creating-arrays">
<h2>5.3. Creating arrays<a class="headerlink" href="#creating-arrays" title="Permalink to this headline">¶</a></h2>
<p>When defining a topic class, you can make a field map to an IDL array by initializing it to an array of the appropriate dimensions.
The MATLAB API for Vortex DDS recognizes arrays of most types as identifying IDL arrays.
The one exception is that arrays of MATLAB <tt class="docutils literal"><span class="pre">char</span></tt> are still interpreted as an IDL string.</p>
<p>The following example shows an topic class that defines arrays:</p>
<div class="highlight-python"><div class="highlight"><pre>classdef ArrayTopic &lt; Vortex.AbstractType
    properties
        x = zeros([1 4])        %IDL: double x[4];
        y int32 = zeros([3 4])  %IDL: long y[3][4];
    end
    methods (Static)
        function keys = getKey
            keys = &#39;&#39;; %No Key
        end
    end
end
</pre></div>
</div>
</div>
<div class="section" id="unsupported-types">
<h2>5.4. Unsupported Types<a class="headerlink" href="#unsupported-types" title="Permalink to this headline">¶</a></h2>
<p>When creating topics with out IDL, you must accept the following restrictions:</p>
<ul class="simple">
<li>IDL sequences cannot be defined.</li>
<li>arrays of IDL strings cannot be defined.</li>
<li>bounded IDL strings cannot be defined.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/Vortex_logo_2014.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5. MATLAB without IDL</a><ul>
<li><a class="reference internal" href="#creating-a-matlab-topic-class">5.1. Creating a MATLAB Topic class</a></li>
<li><a class="reference internal" href="#mapping-of-matlab-types-to-idl-types">5.2. Mapping of MATLAB types to IDL types</a></li>
<li><a class="reference internal" href="#creating-arrays">5.3. Creating arrays</a></li>
<li><a class="reference internal" href="#unsupported-types">5.4. Unsupported Types</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="IDL-MATLAB.html"
                        title="previous chapter">4. MATLAB Generation from IDL</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="qos_provider.html"
                        title="next chapter">6. QoS Provider</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/IDLless-MATLAB.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="qos_provider.html" title="6. QoS Provider"
             >next</a> |</li>
        <li class="right" >
          <a href="IDL-MATLAB.html" title="4. MATLAB Generation from IDL"
             >previous</a> |</li>
        <li><a href="index.html">OpenSplice MATLAB Guide</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2018, ADLINK Technology Limited.
    </div>
  </body>
</html>