<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2. Overview &mdash; The OpenSplice Deployment Guide</title>
    
    <link rel="stylesheet" href="_static/vortex.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '6.x',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="The OpenSplice Deployment Guide" href="index.html" />
    <link rel="next" title="3. Service Descriptions" href="service-feature-list.html" />
    <link rel="prev" title="1. Preface" href="preface.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="service-feature-list.html" title="3. Service Descriptions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="preface.html" title="1. Preface"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Deployment Guide</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="overview">
<span id="id1"></span><h1>2. Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p><em>This chapter explains the Vortex OpenSplice middleware from
a configuration perspective. It shows the different components
running on a single node and briefly explains the role of each
entity. Furthermore, it defines a reference system that will
be used throughout the rest of the document as an example.</em></p>
<div class="section" id="vortex-opensplice-architecture">
<span id="vortex-opensplice-dds-architecture"></span><h2>2.1. Vortex OpenSplice Architecture<a class="headerlink" href="#vortex-opensplice-architecture" title="Permalink to this headline">¶</a></h2>
<p>Vortex OpenSplice is highly configurable, even allowing the architectural
structure of the DDS middleware to be chosen by the user at deployment time.</p>
<p>Vortex OpenSplice can be configured to run using a so-called ‘federated’
<em>shared memory</em> architecture, where both the DDS related administration
(including the optional pluggable services) and DDS applications interface
directly with shared memory.</p>
<p>Alternatively, Vortex OpenSplice also supports a so-called ‘standalone’
<em>single process</em> architecture, where one or more DDS applications,
together with the OpenSplice administration and services, can all be
grouped into a single  operating system process.</p>
<p>Both deployment modes support a configurable and extensible set
of services, providing functionality such as:</p>
<ul class="simple">
<li><em>networking</em> - providing QoS-driven real-time networking based on multiple
reliable multicast ‘channels’</li>
<li><em>durability</em> - providing fault-tolerant storage for both real-time state
data as well as persistent settings</li>
<li><em>remote control and monitoring SOAP service</em> - providing remote web-based
access using the SOAP protocol from various Vortex OpenSplice tools</li>
<li><em>dbms service</em> - providing a connection between the real-time and the
enterprise domain by bridging data from DDS to DBMS and <em>vice versa</em></li>
</ul>
<p>The Vortex OpenSplice middleware can be easily configured, on the fly, using
its pluggable service architecture: the services that are needed can be
specified together with their configuration for the particular application
domain, including networking parameters, and durability levels for example).</p>
<p>There are advantages to both the single process and shared memory deployment
architectures, so the most appropriate deployment choice depends on the user’s
exact requirements and DDS scenario.</p>
<div class="section" id="single-process-architecture">
<span id="id2"></span><h3>2.1.1. Single Process architecture<a class="headerlink" href="#single-process-architecture" title="Permalink to this headline">¶</a></h3>
<p>This deployment allows the DDS applications and Vortex OpenSplice administration to be
contained together within one single operating system process. This ‘standalone’
single process deployment option is most useful in environments where shared
memory is unavailable or undesirable. As dynamic heap memory is utilized in the
single process deployment environment, there is no need to pre-configure a shared
memory segment which in some use cases is also seen as an advantage of this
deployment option.</p>
<p>Each DDS application on a processing node is implemented as an individual,
self-contained standalone operating system process (<em>i.e.</em> all of the DDS
administration and necessary services have been linked into the application
process). This is known as a <strong>single process</strong> application. Communication between
multiple single process applications co-located on the same machine node is done
<em>via</em> the (loop-back) network, since there is no memory shared between them.
An extension to the single process architecture is the option to co-locate multiple
DDS applications into a single process. This can be done be creating application
libraries rather than application executables that can be ‘linked’ into the single
process in a similar way to how the DDS middleware services are linked into the
single process. This is known as a <strong>single process application cluster</strong>.
Communication between clustered applications (that together form a single process)
can still benefit from using the process’s heap memory, which typically is an order
of magnitude faster than using a network, yet the lifecycle of these clustered
applications will be tightly coupled.</p>
<p>The Single Process deployment is the default deployment architecture provided
within Vortex OpenSplice and allows for easy deployment with minimal configuration
required for a running DDS system.</p>
<p>The diagram <a class="reference internal" href="#the-vortex-opensplice-single-process-architecture">The Vortex OpenSplice Single Process Architecture</a>
shows an overview of the single process architecture of Vortex OpenSplice.</p>
<p class="centered" id="the-vortex-opensplice-single-process-architecture">
<strong><strong>The Vortex OpenSplice Single Process Architecture</strong></strong></p><a class="reference internal image-reference" href="_images/SingleProcessArchitecture.png"><img alt="The Vortex OpenSplice Single Process Architecture" class="align-center" src="_images/SingleProcessArchitecture.png" style="height: 70mm;" /></a>
</div>
<div class="section" id="shared-memory-architecture">
<span id="id3"></span><h3>2.1.2. Shared Memory architecture<a class="headerlink" href="#shared-memory-architecture" title="Permalink to this headline">¶</a></h3>
<p>In the ‘federated’ shared memory architecture data is physically present only once
on any machine but smart administration still provides each subscriber with his own
private view on this data. Both the DDS applications and Vortex OpenSplice
administration interface directly with the shared memory which is created by the
Vortex OpenSplice daemon on start up. This architecture enables a subscriber&#8217;s data cache
to be seen as an individual database and the content can be filtered, queried, <em>etc.</em>
by using the Vortex OpenSplice content subscription profile.</p>
<p>Typically for advanced DDS users, the shared memory architecture is a more
powerful mode of operation and results in extremely low footprint, excellent
scalability and optimal performance when compared to the implementation where
each reader/writer are communication end points each with its own storage (<em>i.e.</em>
historical data both at reader and writer) and where the data itself still has to be
moved, even within the same platform.</p>
<p>The diagram <a class="reference internal" href="#the-vortex-opensplice-shared-memory-architecture">The Vortex OpenSplice Shared Memory Architecture</a>
shows an overview of the shared memory architecture of Vortex OpenSplice on
<em>one</em> computing node. Typically, there are <em>many</em> nodes within a system.</p>
<p class="centered" id="the-vortex-opensplice-shared-memory-architecture">
<strong><strong>The Vortex OpenSplice Shared Memory Architecture</strong></strong></p><a class="reference internal image-reference" href="_images/SharedMemoryArchitecture.png"><img alt="The Vortex OpenSplice Shared Memory Architecture" class="align-center" src="_images/SharedMemoryArchitecture.png" style="height: 70mm;" /></a>
</div>
<div class="section" id="comparison-of-deployment-architectures">
<span id="id4"></span><h3>2.1.3. Comparison of Deployment Architectures<a class="headerlink" href="#comparison-of-deployment-architectures" title="Permalink to this headline">¶</a></h3>
<p><strong>Simple when sufficient, Performant when required</strong></p>
<p>The choice between the ‘federated’ or ‘standalone’ deployment architecture is
basically about going for out-of-the-box simplicity or for maximum performance:</p>
<p><strong>Federated Application Cluster</strong></p>
<blockquote>
<div><ul class="simple">
<li>Co-located applications share a common set of pluggable services (daemons)</li>
<li>Resources (<em>e.g.</em> memory/networking) are managed <em>per</em> ‘federation’</li>
<li>Added value: performance (scalability <em>and</em> determinism)</li>
</ul>
</div></blockquote>
<p class="centered" id="federated-application-cluster">
<strong><strong>Federated Application Cluster</strong></strong></p><a class="reference internal image-reference" href="_images/FederatedApplicationCluster.png"><img alt="Federated Application Cluster" class="align-center" src="_images/FederatedApplicationCluster.png" style="height: 35mm;" /></a>
<p><strong>Non-federated, `single process’ Applications</strong></p>
<blockquote>
<div><ul class="simple">
<li>Each application links the required DDS services as libraries
into a standalone ‘single process’</li>
<li>Resources are managed by each individual application</li>
<li>Added value: Ease-of-use (‘zero-configuration’, middleware
lifecycle is simply coupled to that of the application process)</li>
</ul>
</div></blockquote>
<p class="centered" id="non-federated-single-process-applications">
<strong><strong>Non-federated, single-process Applications</strong></strong></p><a class="reference internal image-reference" href="_images/NonFederatedSingleProcessApplication.png"><img alt="Non-federated, single-process Applications" class="align-center" src="_images/NonFederatedSingleProcessApplication.png" style="height: 25mm;" /></a>
</div>
<div class="section" id="configuring-and-using-the-deployment-architectures">
<span id="id5"></span><h3>2.1.4. Configuring and Using the Deployment Architectures<a class="headerlink" href="#configuring-and-using-the-deployment-architectures" title="Permalink to this headline">¶</a></h3>
<p>The deployment architecture choice between a shared-memory federation or a
standalone ‘single process’ is a runtime choice driven by a simple single
configuration parameter in the domain configuration xml file:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">&lt;SingleProcess&gt;true&lt;/SingleProcess&gt;</span></tt></div></blockquote>
<p>Note that there is absolutely no need to recompile or even re-link an application
when selecting or changing the deployment architecture.</p>
<p>NOTE for VxWorks kernel mode builds of OpenSplice the single process feature of the OpenSplice domain must not be enabled. i.e. &#8220;&lt;SingleProcess&gt;true&lt;/SingleProcess&gt;&#8221; must not be included in the OpenSplice Configuration xml. The model used on VxWorks kernel builds is always that an area of kernel memory is allocated to store the domain database ( the size of which is controlled by the size option in the Database configuration for OpenSplice as is used on other platforms for the shared memory model. ) This can then be accessed by any task on the same VxWorks node.</p>
<p>The deployment modes can be mixed at will, so even on a single computing node,
one could have some applications that are deployed as a federation as well as other
applications that are deployed as individual &#8216;single processes&#8217;.</p>
<p>To facilitate the ‘out-of-the-box’ experience, the default <tt class="docutils literal"><span class="pre">ospl.xml</span></tt> configuration
file specifies the standalone ‘single process’ deployment architecture where the
middleware is simply linked as libraries into an application: no need to configure
shared-memory, no need to ‘fire up’  Vortex OpenSplice first to start the related services.
The middleware lifecycle (and with that the information lifecycle) is directly
coupled to that of the application.</p>
<p>When, with growing system scale, scalability and determinism require efficient
sharing of memory and networking resources, the deployment architecture can be
switched easily to the federated archtirecture; thereafter the middleware and
application(s) lifecycles are decoupled and a single set of services facilitate the
federation of applications with regard to scheduling data transfers over the wire
(based upon the actual importance and urgency of each published data-sample),
maintaining data for late joining applications (on the same or other nodes in the
system) and efficient (single-copy) sharing of all data within the computing node
regardless of the number of applications in the federation.</p>
<p>The Vortex OpenSplice distribution contains multiple example configuration files that
exploit both deployment architectures. Configurations that exploit the
single-process architecture start with <tt class="docutils literal"><span class="pre">ospl_sp_</span></tt> whereas federated-deployment
configurations start with <tt class="docutils literal"><span class="pre">ospl_shmem_</span></tt>.</p>
</div>
</div>
<div class="section" id="vortex-opensplice-usage">
<span id="vortex-opensplice-dds-usage"></span><h2>2.2. Vortex OpenSplice Usage<a class="headerlink" href="#vortex-opensplice-usage" title="Permalink to this headline">¶</a></h2>
<p>The Vortex OpenSplice environment has to be set up to instruct the node where executables
and libraries can be found in order to be able to start the Domain Service.</p>
<p><a class="reference internal" href="_images/icon-unix.png"><img alt="unix" src="_images/icon-unix.png" style="height: 6mm;" /></a> <a class="reference internal" href="_images/icon-linux.png"><img alt="linux" src="_images/icon-linux.png" style="height: 6mm;" /></a></p>
<blockquote>
<div>On UNIX-like platforms this can be realized by starting a shell and
sourcing the <tt class="docutils literal"><span class="pre">release.com</span></tt> file located in the root directory of
the Vortex OpenSplice installation:</div></blockquote>
<div class="highlight-python"><div class="highlight"><pre>% . ./release.com
</pre></div>
</div>
<p><a class="reference internal" href="_images/icon-windows.png"><img alt="windows" src="_images/icon-windows.png" style="height: 6mm;" /></a></p>
<blockquote>
<div>On the Windows platform the environment must be set up by running
<tt class="docutils literal"><span class="pre">release.bat</span></tt>, or else the Vortex OpenSplice Command Prompt must be used.</div></blockquote>
<div class="section" id="starting-vortex-opensplice-for-a-single-process-deployment">
<span id="starting-vortex-opensplice-dds-for-a-single-process-deployment"></span><h3>2.2.1. Starting Vortex OpenSplice for a Single Process Deployment<a class="headerlink" href="#starting-vortex-opensplice-for-a-single-process-deployment" title="Permalink to this headline">¶</a></h3>
<p>For ‘standalone’ single process deployment, there is no need to start the Vortex OpenSplice
middleware before starting the DDS application, since the application itself
will implicitly start the library threads of Vortex OpenSplice Domain Service and
associated services at the point when the DDS <tt class="docutils literal"><span class="pre">create_participant</span></tt> operation is
invoked by the standalone application process.</p>
</div>
<div class="section" id="starting-vortex-opensplice-for-a-shared-memory-deployment">
<span id="starting-vortex-opensplice-dds-for-a-shared-memory-deployment"></span><h3>2.2.2. Starting Vortex OpenSplice for a Shared Memory Deployment<a class="headerlink" href="#starting-vortex-opensplice-for-a-shared-memory-deployment" title="Permalink to this headline">¶</a></h3>
<p>For a shared memory deployment, it is necessary to start the Vortex OpenSplice
Domain Service prior to running a DDS application. The <tt class="docutils literal"><span class="pre">ospl</span></tt> command-tool is
provided to manage Vortex OpenSplice for shared memory deployments. To start
Vortex OpenSplice in this way, enter:</p>
<div class="highlight-python"><div class="highlight"><pre>% . ./release.com
</pre></div>
</div>
<p>This will start the Domain Service using the default configuration.</p>
<p><a class="reference internal" href="_images/icon-caution.png"><img alt="caution" src="_images/icon-caution.png" style="height: 6mm;" /></a></p>
<blockquote>
<div><strong>NOTE</strong>: The <strong>Integrity</strong> version of Vortex OpenSplice does not include the <tt class="docutils literal"><span class="pre">ospl</span></tt>
program. Instead there is a project generator, <tt class="docutils literal"><span class="pre">ospl_projgen</span></tt>, which generates
projects containing the required address spaces which will auto-start when loaded.
Please refer to the <em>Getting Started Guide</em> for details.</div></blockquote>
<p><a class="reference internal" href="_images/icon-caution.png"><img alt="caution" src="_images/icon-caution.png" style="height: 6mm;" /></a></p>
<blockquote>
<div><strong>NOTE</strong>: The <strong>VxWorks</strong> version of Vortex OpenSplice does not include the <tt class="docutils literal"><span class="pre">ospl</span></tt>
program. Please refer to the <em>Getting Started Guide</em> for details of how to use
VxWorks projects and Real Time Processes to deploy Vortex OpenSplice applications.</div></blockquote>
</div>
<div class="section" id="monitoring">
<span id="id6"></span><h3>2.2.3. Monitoring<a class="headerlink" href="#monitoring" title="Permalink to this headline">¶</a></h3>
<p>The Vortex OpenSplice Domain Service can be monitored and tuned in numerous ways
after it has been started. The monitoring and tuning capabilities are described in the
following subsections.</p>
<div class="section" id="diagnostic-messages">
<span id="id7"></span><h4>2.2.3.1. Diagnostic Messages<a class="headerlink" href="#diagnostic-messages" title="Permalink to this headline">¶</a></h4>
<p>Vortex OpenSplice outputs diagnostic information. This information is written to the
<tt class="docutils literal"><span class="pre">ospl-info.log</span></tt> file located in the start-up directory, by default. Error messages
are written to the <tt class="docutils literal"><span class="pre">ospl-error.log</span></tt> file, by default. The state of the system can be
determined from the information written into these files.</p>
<p>The location where the information and error messages are stored can be overridden
by setting the <tt class="docutils literal"><span class="pre">OSPL_LOGPATH</span></tt> environment variable to a location on disk (by
specifying a path), to standard out (by specifying <tt class="docutils literal"><span class="pre">&lt;stdout&gt;</span></tt>) or to standard error (by
specifying <tt class="docutils literal"><span class="pre">&lt;stderr&gt;</span></tt>). The names of these log files can also be changed by setting the
<tt class="docutils literal"><span class="pre">OSPL_INFOFILE</span></tt> and <tt class="docutils literal"><span class="pre">OSPL_ERRORFILE</span></tt> variables.</p>
<p>Vortex OpenSplice also accepts the environment properties <tt class="docutils literal"><span class="pre">OSPL_VERBOSITY</span></tt> and
<tt class="docutils literal"><span class="pre">OSPL_LOGAPPEND</span></tt>. These provide an alternate method of specifying values for
Attribute <tt class="docutils literal"><span class="pre">append</span></tt> and Attribute <tt class="docutils literal"><span class="pre">verbosity</span></tt> of the <tt class="docutils literal"><span class="pre">Domain/Report</span></tt>
configuration element (see the  <a class="reference internal" href="guide.html#configuration"><em>Configuration</em></a>
section for details).</p>
<p><a class="reference internal" href="_images/icon-info.png"><img alt="info" src="_images/icon-info.png" style="height: 6mm;" /></a></p>
<blockquote>
<div>Values specified in the domain configuration override the environment values.</div></blockquote>
</div>
<div class="section" id="vortex-opensplice-tuner">
<span id="id8"></span><h4>2.2.3.2. Vortex OpenSplice Tuner<a class="headerlink" href="#vortex-opensplice-tuner" title="Permalink to this headline">¶</a></h4>
<p>The intention of Vortex OpenSplice Tuner, <tt class="docutils literal"><span class="pre">ospltun</span></tt>, is to provide facilities for monitoring
and controlling Vortex OpenSplice, as well as the applications that use OpenSplice for the
distribution of data. The <em>Vortex OpenSplice Tuner User Guide</em> specifies the capabilities of
Vortex OpenSplice Tuner and describes how they should be used.</p>
<p>Note that the Tuner will only be able to connect to the memory running in a
particular DDS Domain by being run on a node that is already running Vortex OpenSplice
using the shared memory deployment mode.</p>
<p>The Tuner will also be able to monitor and control a Domain running as a single process
if the Tuner itself is started as the single process application with other DDS
applications clustered in the process by being deployed as a single process application
cluster. Please refer to the <em>Vortex OpenSplice Tuner User Guide</em> for a
description of how to cluster applications together in a single process.</p>
</div>
<div class="section" id="vortex-opensplice-memory-management-statistics-monitor">
<span id="id9"></span><h4>2.2.3.3. Vortex OpenSplice Memory Management Statistics Monitor<a class="headerlink" href="#vortex-opensplice-memory-management-statistics-monitor" title="Permalink to this headline">¶</a></h4>
<p>The Vortex OpenSplice Memory Management Statistics Tool, <tt class="docutils literal"><span class="pre">mmstat</span></tt>, provides a
command line interface that allows monitoring the status of the nodal shared
administration (shared memory) used by the middleware and the applications. Use
the help switch (<tt class="docutils literal"><span class="pre">mmstat</span> <span class="pre">-h</span></tt>) for usage information. Please refer to
<a class="reference internal" href="tools.html#mmstat-memory-management-statistics"><em>the Tools chapter</em></a>
for detailed information about <tt class="docutils literal"><span class="pre">mmstat</span></tt>.</p>
<p><a class="reference internal" href="_images/icon-caution.png"><img alt="caution" src="_images/icon-caution.png" style="height: 6mm;" /></a></p>
<blockquote>
<div>Please note that <tt class="docutils literal"><span class="pre">mmstat</span></tt> is only suitable for diagnostic purposes,
and its use is only applicable in shared memory mode.</div></blockquote>
</div>
</div>
<div class="section" id="stopping-vortex-opensplice">
<span id="stopping-vortex-opensplice-dds"></span><h3>2.2.4. Stopping Vortex OpenSplice<a class="headerlink" href="#stopping-vortex-opensplice" title="Permalink to this headline">¶</a></h3>
<div class="section" id="stopping-a-single-process-deployment">
<span id="id10"></span><h4>2.2.4.1. Stopping a Single Process deployment<a class="headerlink" href="#stopping-a-single-process-deployment" title="Permalink to this headline">¶</a></h4>
<p>When deployed as a single process, the application can either be terminated
naturally when the end of the main function is reached, or stopped prematurely by
means of a signal interrupt, for example <tt class="docutils literal"><span class="pre">Ctrl-C</span></tt>. In either case, the
Vortex OpenSplice middleware running within the process will be stopped and the
process will terminate.</p>
</div>
<div class="section" id="stopping-a-shared-memory-deployment">
<span id="id11"></span><h4>2.2.4.2. Stopping a Shared Memory deployment<a class="headerlink" href="#stopping-a-shared-memory-deployment" title="Permalink to this headline">¶</a></h4>
<p>In shared memory deployment mode, the Vortex OpenSplice Domain Service can be
stopped by issuing the following command on the command-line.</p>
<div class="highlight-python"><div class="highlight"><pre>% ospl stop
</pre></div>
</div>
<p>The Vortex OpenSplice Domain Service will react by announcing the shutdown using the
shared administration. Applications will not be able to use DDS functionality
anymore and services will terminate elegantly. Once this has succeeded, the Domain
Service will destroy the shared administration and finally terminate itself.</p>
<div class="section" id="stopping-ospl-by-using-signals">
<span id="id12"></span><h5>2.2.4.2.1. Stopping OSPL by using signals<a class="headerlink" href="#stopping-ospl-by-using-signals" title="Permalink to this headline">¶</a></h5>
<p>Alternatively the Vortex OpenSplice domain service can also be stopped by sending a
signal to the <tt class="docutils literal"><span class="pre">ospl</span></tt> process, assuming the process was started using the <tt class="docutils literal"><span class="pre">-f</span></tt>
option.</p>
<p><a class="reference internal" href="_images/icon-unix.png"><img alt="unix" src="_images/icon-unix.png" style="height: 6mm;" /></a></p>
<blockquote>
<div>For example, on Unix you could use the following command to send a termination
signal to the <tt class="docutils literal"><span class="pre">ospl</span></tt> tool, where <tt class="docutils literal"><span class="pre">&lt;pid&gt;</span></tt> identifies the <tt class="docutils literal"><span class="pre">ospl</span></tt> tool pid:</div></blockquote>
<div class="highlight-python"><div class="highlight"><pre>% kill –SIGTERM &lt;pid&gt;
</pre></div>
</div>
<p>Sending such a signal will cause the <tt class="docutils literal"><span class="pre">ospl</span></tt> tool to exit gracefully, properly
terminating all services and exiting with returncode <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
<p>The following table shows a list of all POSIX signals and what the behavior of
OSPL is when that signal is sent to the <tt class="docutils literal"><span class="pre">ospl</span></tt> tool.</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Signal</th>
<th class="head">Default action</th>
<th class="head">OSPL action</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>SIGHUP</em></td>
<td>Term.</td>
<td>Graceful exit</td>
<td>Hang up on
controlling
process</td>
</tr>
<tr class="row-odd"><td><em>SIGINT</em></td>
<td>Term.</td>
<td>Graceful exit</td>
<td>Interrupt from
keyboard</td>
</tr>
<tr class="row-even"><td><em>SIGQUIT</em></td>
<td>Core</td>
<td>Graceful exit</td>
<td>Quit from keyboard</td>
</tr>
<tr class="row-odd"><td><em>SIGILL</em></td>
<td>Core</td>
<td>Graceful exit</td>
<td>Illegal
instruction</td>
</tr>
<tr class="row-even"><td><em>SIGABRT</em></td>
<td>Core</td>
<td>Graceful exit</td>
<td>Abort signal from
abort function</td>
</tr>
<tr class="row-odd"><td><em>SIGFPE</em></td>
<td>Core</td>
<td>Graceful exit</td>
<td>Floating point
exception</td>
</tr>
<tr class="row-even"><td><em>SIGKILL</em></td>
<td>Term.</td>
<td>Term.</td>
<td>Kill signal (can&#8217;t
catch, block,
ignore)</td>
</tr>
<tr class="row-odd"><td><em>SIGSEGV</em></td>
<td>Core</td>
<td>Graceful exit</td>
<td>Invalid memory
reference</td>
</tr>
<tr class="row-even"><td><em>SIGPIPE</em></td>
<td>Term.</td>
<td>Graceful exit</td>
<td>Broken pipe: write
to pipe with no
readers</td>
</tr>
<tr class="row-odd"><td><em>SIGALRM</em></td>
<td>Term.</td>
<td>Graceful exit</td>
<td>Timer signal from
alarm function</td>
</tr>
<tr class="row-even"><td><em>SIGTERM</em></td>
<td>Term.</td>
<td>Graceful exit</td>
<td>Termination signal</td>
</tr>
<tr class="row-odd"><td><em>SIGUSR1</em></td>
<td>Term.</td>
<td>Graceful exit</td>
<td>User defined
signal 1</td>
</tr>
<tr class="row-even"><td><em>SIGUSR2</em></td>
<td>Term.</td>
<td>Graceful exit</td>
<td>User defined
signal 2</td>
</tr>
<tr class="row-odd"><td><em>SIGCHLD</em></td>
<td>Ignore</td>
<td>Ignore</td>
<td>A child process
has terminated or
stopped</td>
</tr>
<tr class="row-even"><td><em>SIGCONT</em></td>
<td>Ignore</td>
<td>Ignore</td>
<td>Continue if
stopped</td>
</tr>
<tr class="row-odd"><td><em>SIGSTOP</em></td>
<td>Stop</td>
<td>Stop</td>
<td>Stop process
(can&#8217;t catch,
block, ignore)</td>
</tr>
<tr class="row-even"><td><em>SIGTSTOP</em></td>
<td>Stop</td>
<td>Graceful exit</td>
<td>Stop typed at tty</td>
</tr>
<tr class="row-odd"><td><em>SIGTTIN</em></td>
<td>Stop</td>
<td>Graceful exit</td>
<td>Tty input for
background process</td>
</tr>
<tr class="row-even"><td><em>SIGTTOUT</em></td>
<td>Stop</td>
<td>Graceful exit</td>
<td>Tty output for
background process</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="stopping-applications-in-shared-memory-mode">
<span id="id13"></span><h5>2.2.4.2.2. Stopping Applications in Shared Memory Mode<a class="headerlink" href="#stopping-applications-in-shared-memory-mode" title="Permalink to this headline">¶</a></h5>
<p>Applications that are connected to and use Vortex OpenSplice in shared memory
mode must not be terminated with a <tt class="docutils literal"><span class="pre">KILL</span></tt> signal. This will ensure that Vortex OpenSplice
DDS shared memory always remains in a valid, functional state.</p>
<p>When Vortex OpenSplice applications terminate naturally, a cleanup mechanism is
executed that releases any references held to the shared memory within Vortex OpenSplice
which that application was using. This mechanism will be executed even when an
application is terminated by other means (<em>e.g.</em> by terminating with <tt class="docutils literal"><span class="pre">Ctrl+C</span></tt>)
or even if the application crashes in the user code.</p>
<p><a class="reference internal" href="_images/icon-caution.png"><img alt="caution" src="_images/icon-caution.png" style="height: 6mm;" /></a></p>
<blockquote>
<div>The cleanup mechanisms are <em>not</em> executed when an application is terminated with a
<tt class="docutils literal"><span class="pre">KILL</span></tt> signal. For this reason a user must not terminate an application with a
<tt class="docutils literal"><span class="pre">kill</span> <span class="pre">-9</span></tt> command (or, on Windows, must not use TaskManager’s <em>End Process</em>
option) because the process will be forcibly removed and the cleanup mechanisms
will be prevented from executing. If an application is killed in this manner, the
shared memory regions of Vortex OpenSplice will become inconsistent and no recovery
will then be possible other than re-starting Vortex OpenSplice and all applications on the
node.</div></blockquote>
</div>
</div>
</div>
<div class="section" id="deploying-vortex-opensplice-on-vxworks-6-x">
<span id="deploying-vortex-opensplice-dds-on-vxworks-6-x"></span><h3>2.2.5. Deploying Vortex OpenSplice on VxWorks 6.x<a class="headerlink" href="#deploying-vortex-opensplice-on-vxworks-6-x" title="Permalink to this headline">¶</a></h3>
<p>The <strong>VxWorks</strong> version of Vortex OpenSplice does not include the <tt class="docutils literal"><span class="pre">ospl</span></tt> program.
Please refer to the <em>Getting Started Guide</em> for details of how to use
VxWorks projects and Real Time Processes to deploy Vortex OpenSplice
applications.</p>
</div>
<div class="section" id="deploying-vortex-opensplice-on-integrity">
<span id="deploying-vortex-opensplice-dds-on-integrity"></span><h3>2.2.6. Deploying Vortex OpenSplice on Integrity<a class="headerlink" href="#deploying-vortex-opensplice-on-integrity" title="Permalink to this headline">¶</a></h3>
<p>The <strong>Integrity</strong> version of Vortex OpenSplice does not include the <tt class="docutils literal"><span class="pre">ospl</span></tt> program.
Instead there is a project generator, <tt class="docutils literal"><span class="pre">ospl_projgen</span></tt>, which generates projects
containing the required address spaces which will auto-start when loaded. Please
refer to the <em>Getting Started Guide</em> for detailed information about
Vortex OpenSplice deployment on Integrity.</p>
</div>
<div class="section" id="installing-uninstalling-the-vortex-opensplice-c-assembly-to-the-global-assembly-cache">
<span id="installing-uninstalling-the-vortex-opensplice-dds-c-assembly-to-the-global-assembly-cache"></span><h3>2.2.7. Installing/Uninstalling the Vortex OpenSplice C# Assembly to the Global Assembly Cache<a class="headerlink" href="#installing-uninstalling-the-vortex-opensplice-c-assembly-to-the-global-assembly-cache" title="Permalink to this headline">¶</a></h3>
<p>The installer for the commercial distribution of Vortex OpenSplice includes the option
to install the C# Assembly to the Global Assembly Cache during the installation
process. If you chose to omit this step, or you are an open source user, then you
should follow the instructions in the next few paragraphs, which describe how to
manually install and uninstall the assembly to the Global Assembly Cache.</p>
<div class="section" id="installing-the-c-assembly-to-the-global-assembly-cache">
<span id="id14"></span><h4>2.2.7.1. Installing the C# Assembly to the Global Assembly Cache<a class="headerlink" href="#installing-the-c-assembly-to-the-global-assembly-cache" title="Permalink to this headline">¶</a></h4>
<p>To install an assembly to the Global Assembly Cache, you need to use the
<tt class="docutils literal"><span class="pre">gacutil.exe</span></tt> tool. Start a Visual Studio command prompt and type:</p>
<div class="highlight-python"><div class="highlight"><pre>% gacutil /i &lt;Vortex OpenSplice installation path&gt;\bin\dcpssacsAssembly.dll
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">&lt;Vortex</span> <span class="pre">OpenSplice</span> <span class="pre">installation</span> <span class="pre">path&gt;</span></tt> is the installation path of the
Vortex OpenSplice distribution. If you are successful you will see a message similar
to the following:</p>
<div class="highlight-python"><div class="highlight"><pre>% C:\Program Files\Microsoft Visual Studio 9.0\VC&gt;gacutil.exe /i
&quot;C:\Program Files \PrismTech\VortexOpenSplice\V6.6.0\HDE\x86.win32\
bin\dcpssacsAssembly.dll&quot;
%
% Microsoft (R) .NET Global Assembly Cache Utility. Version
3.5.30729.1
% Copyright (c) Microsoft Corporation. All rights reserved.
%
% Assembly successfully added to the cache
%
% C:\Program Files\Microsoft Visual Studio 9.0\VC&gt;
</pre></div>
</div>
</div>
<div class="section" id="uninstalling-the-c-assembly-from-the-global-assembly-cache">
<span id="id15"></span><h4>2.2.7.2. Uninstalling the C# Assembly from the Global Assembly Cache<a class="headerlink" href="#uninstalling-the-c-assembly-from-the-global-assembly-cache" title="Permalink to this headline">¶</a></h4>
<p>To uninstall an assembly from the Global Assembly Cache, you need to use the
<tt class="docutils literal"><span class="pre">gacutil.exe</span></tt> tool. Start a Visual Studio command prompt and type:</p>
<div class="highlight-python"><div class="highlight"><pre>% gacutil /u dcpssacsAssembly,Version=&lt;version_number_goes_here&gt;
</pre></div>
</div>
<p>The version number of the assembly is defined in the <tt class="docutils literal"><span class="pre">&lt;Vortex</span> <span class="pre">OpenSplice</span>
<span class="pre">installation</span> <span class="pre">path&gt;\etc\RELEASEINFO</span></tt> file, in the <tt class="docutils literal"><span class="pre">CS_DLL_VERSION</span></tt>
variable.</p>
<p>If you are successful you will see a message similar to the following:</p>
<div class="highlight-python"><div class="highlight"><pre>% C:\Program Files\Microsoft Visual Studio 9.0\VC&gt;gacutil /u
dcpssacsAssembly,Version=5.1.0.14734
% Microsoft (R) .NET Global Assembly Cache Utility. Version
3.5.30729.1
% Copyright (c) Microsoft Corporation. All rights reserved.
%
% Assembly: dcpssacsAssembly, Version=5.1.0.14734,
Culture=neutral, PublicKeyToken=5b9310ab51310fa9,
processorArchitecture=MSIL
% Uninstalled: dcpssacsAssembly, Version=5.1.0.14734,
Culture=neutral, PublicKeyToken=5b9310ab51310fa9,
processorArchitecture=MSIL
% Number of assemblies uninstalled = 1
% Number of failures = 0
%
% C:\Program Files\Microsoft Visual Studio 9.0\VC&gt;
</pre></div>
</div>
<p><a class="reference internal" href="_images/icon-caution.png"><img alt="caution" src="_images/icon-caution.png" style="height: 6mm;" /></a></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><p class="first">If you do not specify a version to the uninstall option, then all
installed Vortex OpenSplice C# Assemblies in the GAC called
<tt class="docutils literal"><span class="pre">dcpssacsAssembly</span></tt> will be removed from the GAC, so take care with
this option as it can adversely affect any deployed applications that
rely on other versions of these assemblies.</p>
<p class="last">We strongly recommend that every time you uninstall an Vortex OpenSplice
C# Assembly you specify the version you want to uninstall.</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="vortex-opensplice-configuration">
<span id="vortex-opensplice-dds-configuration"></span><h2>2.3. Vortex OpenSplice Configuration<a class="headerlink" href="#vortex-opensplice-configuration" title="Permalink to this headline">¶</a></h2>
<p>Each application domain has its own characteristics; Vortex OpenSplice therefore allows
configuring a wide range of parameters that influence its behaviour to be able to
achieve optimal performance in every situation. This section describes generally
how to instruct Vortex OpenSplice to use a configuration that is different from the default.
This requires the creation of a custom configuration file and an instruction to the
middleware to use this custom configuration file.</p>
<div class="section" id="configuration-files">
<span id="id16"></span><h3>2.3.1. Configuration Files<a class="headerlink" href="#configuration-files" title="Permalink to this headline">¶</a></h3>
<p>Vortex OpenSplice expects the configuration to be defined in the XML format. The
expected syntax and semantics of the configuration parameters will be discussed
further on in this document. Within the context of Vortex OpenSplice, a reference to a
configuration is expressed in the form of a Uniform Resource Identifier (URI).
Currently, only file URIs are supported (for example,
<tt class="docutils literal"><span class="pre">file:///opt/ospl/config/ospl.xml</span></tt>).</p>
<p>When Vortex OpenSplice is started, the Domain Service parses the configuration file using
the provided URI. According to this configuration, it creates the DDS
administration and initialises it. After that, the Domain Service starts the configured
services. The Domain Service passes on its own URI to all services it starts, so they
will also be able to resolve their configuration from this resource as well. (Of
course, it is also possible to configure a different URI for each of the services, but
usually one configuration file for all services will be the most convenient option.)
The services will use default values for the parameters that have not been specified
in the configuration.</p>
</div>
<div class="section" id="environment-variables">
<span id="id17"></span><h3>2.3.2. Environment Variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline">¶</a></h3>
<p>The Vortex OpenSplice middleware will read several environment variables for different
purposes. These variables are mentioned in this document at several places. To some
extent, the user can customize the Vortex OpenSplice middleware by adapting the
environment variables.</p>
<p>When specifying configuration parameter values in a configuration file,
environment variables can be referenced using the notation <tt class="docutils literal"><span class="pre">${VARIABLE}</span></tt>.
When parsing the XML configuration, the Domain Service will replace the symbol
with the variable value found in the environment.</p>
<div class="section" id="the-ospl-uri-environment-variable">
<span id="id18"></span><h4>2.3.2.1. The OSPL_URI environment variable<a class="headerlink" href="#the-ospl-uri-environment-variable" title="Permalink to this headline">¶</a></h4>
<p>The environment variable <tt class="docutils literal"><span class="pre">OSPL_URI</span></tt> is a convenient mechanism to pass the
configuration file to the Domain Service and DDS applications. The variable will
refer to the default configuration that comes with Vortex OpenSplice but of course can
be overridden to refer to a customer configuration.</p>
<p>For single process mode operation this variable is required; see also
<a class="reference internal" href="#single-process-architecture">Single Process architecture</a> in this <em>Guide</em>, and
the detailed description of the Element <tt class="docutils literal"><span class="pre">//OpenSplice/Domain/SingleProcess</span></tt>
in the  <a class="reference internal" href="guide.html#configuration"><em>Configuration</em></a> section.</p>
<p><a class="reference internal" href="_images/icon-unix.png"><img alt="unix" src="_images/icon-unix.png" style="height: 6mm;" /></a> <a class="reference internal" href="_images/icon-linux.png"><img alt="linux" src="_images/icon-linux.png" style="height: 6mm;" /></a></p>
<blockquote>
<div>On Linux/Unix-based platforms, this variable can be initialized by sourcing the
<tt class="docutils literal"><span class="pre">release.com</span></tt> script that is created by the Vortex OpenSplice installer.</div></blockquote>
<p><a class="reference internal" href="_images/icon-windows.png"><img alt="windows" src="_images/icon-windows.png" style="height: 6mm;" /></a></p>
<blockquote>
<div>On Windows platforms, this variable may already be initialized in your environment
by the Windows installer. Alternatively, it can be set by executing the supplied
<tt class="docutils literal"><span class="pre">release.bat</span></tt> script or the Vortex OpenSplice Command Prompt.</div></blockquote>
</div>
</div>
<div class="section" id="configuration-of-single-process-deployment">
<span id="id19"></span><h3>2.3.3. Configuration of Single Process deployment<a class="headerlink" href="#configuration-of-single-process-deployment" title="Permalink to this headline">¶</a></h3>
<p>A single process deployment is enabled when the <tt class="docutils literal"><span class="pre">OSPL_URI</span></tt> environment variable
refers to an XML configuration containing the <tt class="docutils literal"><span class="pre">&lt;SingleProcess&gt;</span></tt> attribute within
the Domain section (<tt class="docutils literal"><span class="pre">//OpenSplice/Domain/SingleProcess</span></tt>).
See the  <a class="reference internal" href="guide.html#configuration"><em>Configuration</em></a> section for full details.
In such a deployment, each Vortex OpenSplice service including the Domain Service
will be started as threads within the existing application process.</p>
<p>In this case there is no need to start the Vortex OpenSplice administration manually
since this is implicitly handled within the DDS code when the application first
invokes the DDS <tt class="docutils literal"><span class="pre">create_participant</span></tt> operation. Since the <tt class="docutils literal"><span class="pre">OSPL_URI</span></tt>
environment variable describes the Vortex OpenSplice system, there is no requirement to
pass any Vortex OpenSplice configuration parameters to the application.</p>
</div>
<div class="section" id="configuration-of-shared-memory-deployment">
<span id="id20"></span><h3>2.3.4. Configuration of Shared Memory deployment<a class="headerlink" href="#configuration-of-shared-memory-deployment" title="Permalink to this headline">¶</a></h3>
<p>In order to have Vortex OpenSplice start with a custom configuration file, use:</p>
<div class="highlight-python"><div class="highlight"><pre>% ospl start &lt;URI&gt;
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">&lt;URI&gt;</span></tt> denotes the URI of the Domain Service configuration file.</p>
<p>In order to stop a specific Vortex OpenSplice instance, the same mechanism holds. Use:</p>
<div class="highlight-python"><div class="highlight"><pre>% ospl stop &lt;URI&gt;
</pre></div>
</div>
<p>Several instances of Vortex OpenSplice can run simultaneously, as long as their
configurations specify different domain names. Typically, only one instance of the
middleware is needed. Multiple instances of the middleware are only required when
one or more applications on the computing node participate in different or multiple
DDS Domains. At any time, the system can be queried for all running Vortex OpenSplice
instances by using the command:</p>
<div class="highlight-python"><div class="highlight"><pre>% ospl list
</pre></div>
</div>
<p>To stop all active Vortex OpenSplice Domains, use:</p>
<div class="highlight-python"><div class="highlight"><pre>% ospl -a stop
</pre></div>
</div>
<p>Note that the <tt class="docutils literal"><span class="pre">&lt;URI&gt;</span></tt> parameter to the above commands is not required if the
<tt class="docutils literal"><span class="pre">OSPL_URI</span></tt> environment variable refers to the configuration that is intended
to be started or stopped.</p>
</div>
<div class="section" id="temporary-files">
<span id="id21"></span><h3>2.3.5. Temporary Files<a class="headerlink" href="#temporary-files" title="Permalink to this headline">¶</a></h3>
<p>Please note that for a <em>shared memory</em> deployment, Vortex OpenSplice uses temporary files
that are used to describe the shared memory that has been created. The exact nature
of these files varies according to the operating system; however, the user does not
need to manipulate these files directly.</p>
<p><a class="reference internal" href="_images/icon-info.png"><img alt="info" src="_images/icon-info.png" style="height: 6mm;" /></a> <a class="reference internal" href="_images/icon-caution.png"><img alt="caution" src="_images/icon-caution.png" style="height: 6mm;" /></a></p>
<blockquote>
<div>On Linux systems the location of the temp files is <tt class="docutils literal"><span class="pre">/tmp</span></tt> by default,
while on Windows the location is the value of the <tt class="docutils literal"><span class="pre">TEMP</span></tt> (or <tt class="docutils literal"><span class="pre">TMP</span></tt>
if <tt class="docutils literal"><span class="pre">TEMP</span></tt> is not set) environment variable. These locations can be
over-ridden, if required, by setting the <tt class="docutils literal"><span class="pre">OSPL_TEMP</span></tt> variable to a
location on disk by specifying a path.
Please note, however, that this <strong>must</strong> be consistent for <strong>all</strong>
environments on a particular node.</div></blockquote>
</div>
</div>
<div class="section" id="applications-which-operate-in-multiple-domains">
<span id="id22"></span><h2>2.4. Applications which operate in multiple domains<a class="headerlink" href="#applications-which-operate-in-multiple-domains" title="Permalink to this headline">¶</a></h2>
<p>Vortex OpenSplice can be configured to allow a DDS application to operate in multiple
domains.</p>
<p><a class="reference internal" href="_images/icon-caution.png"><img alt="caution" src="_images/icon-caution.png" style="height: 6mm;" /></a></p>
<blockquote>
<div>Please note that an application operating in multiple domains is currently only
supported in <em>shared memory</em> deployments.</div></blockquote>
<p>In order to achieve multi-domain operation, the host node for the application must
run Vortex OpenSplice instances for every domain in which applications on that node will
interact. For example, if an application A wants to operate in domains X, Y and Z
then the node on which application A operates must run appropriate services for X,
Y and Z.</p>
<p>Vortex OpenSplice utilises shared memory regions for intra-node communication. Each
domain running on a node must have its own shared memory region, and
subsequently the shared memory region for each domain that an application wants
to operate within must be mapped into that application&#8217;s virtual address space. The
mapping must occur at a virtual address in memory that is common to both the
Vortex OpenSplice daemon (and any services) for that domain and the application itself.
This requires some thought when configuring multiple Vortex OpenSplice domains on a
single node. Care must be taken to ensure that the XML configuration files contain
unique and non-overlapping addresses for the shared memory mapping (please also
see the description of the XML element <tt class="docutils literal"><span class="pre">//OpenSplice/Domain/Database/Address</span></tt> in
the  <a class="reference internal" href="guide.html#configuration"><em>Configuration</em></a> section).</p>
<p>When designing and coding applications, care must also be taken with regard to
usage of the default domain. If a domain is not explicitly identified in the
application code, then appropriate steps must be taken at deployment in order to
ensure that applications operate in the domain they were intended to.</p>
<div class="section" id="interaction-with-a-networking-service">
<span id="id23"></span><h3>2.4.1. Interaction with a Networking Service<a class="headerlink" href="#interaction-with-a-networking-service" title="Permalink to this headline">¶</a></h3>
<p>Where multiple domains are running on a single node, each domain must run its
own instance of a networking service if that domain is to participate in remote
communication.</p>
<ul class="simple">
<li>Each domain should have its own pre-determined port numbers configured in
the XML for that domain.</li>
<li>These port numbers must be common for that domain across the system.</li>
</ul>
</div>
</div>
<div class="section" id="time-jumps">
<span id="id24"></span><h2>2.5. Time-jumps<a class="headerlink" href="#time-jumps" title="Permalink to this headline">¶</a></h2>
<p>Observed time discontinuities can affect data ordering and processing of
middleware actions. Time-jumps can be caused by adjusting the clock forward or
backward. When resuming from being suspended, time will seem to have jumped
forward as if the clock was advanced.</p>
<div class="section" id="effect-on-data">
<span id="id25"></span><h3>2.5.1. Effect on data<a class="headerlink" href="#effect-on-data" title="Permalink to this headline">¶</a></h3>
<p>When a sample is published, a  time stamp is determined at the source which is
attached to the sample before it is sent. The subscriber stores the  time stamp at which
the sample is received in the sample as well. In DDS samples are ordered within the
history of an instance based on either the source  time stamp or the reception</p>
<blockquote>
<div>time stamp. This is controlled by means of the <tt class="docutils literal"><span class="pre">DestinationOrderQosPolicy</span></tt>.</div></blockquote>
<p>The <tt class="docutils literal"><span class="pre">HistoryQosPolicy</span></tt> controls how many historic samples are stored in a
reader. By default, a DataReader has a <tt class="docutils literal"><span class="pre">KEEP_LAST</span></tt> history with a depth
of <tt class="docutils literal"><span class="pre">1</span></tt>. This means that only the ‘last’ (based on the ordering defined by the
<tt class="docutils literal"><span class="pre">DestinationOrderQosPolicy</span></tt>) sample for each instance is maintained by the
middleware. When a sample is received by the subscriber, it determines whether and
where to insert the sample in the history of an instance based on either the source</p>
<blockquote>
<div>time stamp or the reception  time stamp, potentially replacing an existing sample of</div></blockquote>
<p>the instance.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">BY_SOURCE_</span> <span class="pre">time</span> <span class="pre">stamp</span></tt></dt>
<dd>If samples are ordered by source  time stamp
and time is set back 1 hour on the subscriber node, nothing changes. If it
is set back one hour on the publisher node, samples written after the time
has changed have ‘older’ source  time stamps and will therefore not overwrite
the samples in the history from before the time changed.</dd>
<dt><tt class="docutils literal"><span class="pre">BY_RECEPTION_</span> <span class="pre">time</span> <span class="pre">stamp</span></tt></dt>
<dd>If samples are ordered by destination  time stamp
and time is set back back 1 hour on the publisher node, nothing changes. If it is
set back one hour on the subscriber node, samples delivered after the time has
changed have ‘older’ reception  time stamps and will therefore not overwrite the
samples in the history from before the time changed.</dd>
</dl>
</div>
<div class="section" id="effect-on-processing">
<span id="id26"></span><h3>2.5.2. Effect on processing<a class="headerlink" href="#effect-on-processing" title="Permalink to this headline">¶</a></h3>
<p>Processing of relative time actions, actions for which a time contract exists with
local entities (<em>e.g.</em>, inter-process leases, wait for attachment of a service) or time
contracts involving remote parties (<em>e.g.</em>, heartbeats, deadline) may not behave as
expected when time is advanced discontinuously by an operator or when a system is
suspended (<em>e.g.</em>, hibernate or standby) and resumed. If the OS doesn’t support
alternative clocks that aren’t influenced by this, the middleware may for example
stop working because <tt class="docutils literal"><span class="pre">spliced</span></tt> doesn’t seem to have updated its lease on time,
causing services/applications to conclude that <tt class="docutils literal"><span class="pre">spliced</span></tt> isn’t running anymore.</p>
<p>Also, timed waits may not have the expected duration; too short when time is
advanced and too long when time is turned back. Modern Windows and Linux OS’s
provide these alternative clocks. If the clocks are available, the middleware will use
these to prevent the adverse effects of observed time-jumps on its processing.</p>
</div>
<div class="section" id="background-information">
<span id="id27"></span><h3>2.5.3. Background information<a class="headerlink" href="#background-information" title="Permalink to this headline">¶</a></h3>
<p>The basic clock used for  time stamps of data published in DDS is the real-time clock.
This time is expressed as the time since the Unix epoch (00:00:00 on Thursday the
1st of January 1970, UTC). All systems support some form of a real-time clock. For
most distributed systems that use time, the clocks on different nodes should have
similar notions of time progression and because all systems try to keep track of the
actual time as accurately as possible, the real-time clock is typically a very good
distributed notion of time. If a machine is not synchronised with the actual
time, correcting the offset will cause the real-time clock to become discontinuous.
These discontinuities make it impossible even to track relative times, so this is
where monotonic clocks are needed. However, not all systems have support for
monotonic clocks with near real-time time progression.</p>
<p>The following clock-types are used by the middleware to cope with time
discontinuities in processing of data, local leases and remote time based contracts
if supported by the OS.</p>
<dl class="docutils">
<dt><em>Real-time clock</em></dt>
<dd>This is the main clock used for  time stamps on data and
data-related actions. This time is typically kept close to the actual
time by the OS by means of NTP or the like. This clock can also be provided
by the customer through the <em>`UserClock’</em> functionality
(<tt class="docutils literal"><span class="pre">//OpenSplice/Domain/UserClockService</span></tt> is fully described in
the <a class="reference internal" href="guide.html#configuration"><em>Configuration</em></a> section).</dd>
<dt><em>Monotonic clock</em></dt>
<dd>This is a clock that never jumps back and which provides a
measure for the time a machine has been running since boot. When the time
is adjusted, this clock will not jump forward or backward. This clock
doesn’t include the time spent when a machine was suspended.</dd>
<dt><em>Elapsed time clock</em></dt>
<dd>This is also a monotonic clock, since it measures the elapsed
time since some undefined, but fixed time. This clock is also not affected
by adjusting the real-time clock, but it does include time the machine was
suspended.</dd>
</dl>
</div>
</div>
<div class="section" id="time-stamps-and-year-2038-limit">
<h2>2.6. Time stamps and year 2038 limit<a class="headerlink" href="#time-stamps-and-year-2038-limit" title="Permalink to this headline">¶</a></h2>
<p>The DDS_Time_t time stamp definition contains a 32-bit second field with an epoch of 01-01-1970.
As a result of this the second field is unable to represent a time after year 2038.
From version 6.7 this problem is addressed by changing the second field to a 64-bit representation.
For now this change is only done for CORBA C++ and CORBA Java and all internal DDS data structures.
All other language bindings still use the 32-bit representation.
Version 6.7 is fully compatible with older versions and will communicate by default in the 32-bit time representation
with other nodes. If the domain/y2038Ready option is set, the node will use the new 64-bit second representation which
makes it incompatible with older nodes prior to version 6.7. (<tt class="docutils literal"><span class="pre">//OpenSplice/Domain/y2038Ready</span></tt> is fully described
in the <a class="reference internal" href="guide.html#configuration"><em>Configuration</em></a> section)</p>
<div class="section" id="corba-c">
<span id="id28"></span><h3>2.6.1. CORBA C++<a class="headerlink" href="#corba-c" title="Permalink to this headline">¶</a></h3>
<p>By default the CORBA C++ library (dcpsccpp) that comes with OpenSplice is built with support for the 32-bit DDS_Time_t representation.
To rebuild this library to get support for the new 64-bit DDS_Time_t representation please look at the <tt class="docutils literal"><span class="pre">OSPL_HOME/custom_lib/ccpp/README</span></tt>
document which explains how to do this.</p>
</div>
<div class="section" id="corba-java">
<span id="id29"></span><h3>2.6.2. CORBA Java<a class="headerlink" href="#corba-java" title="Permalink to this headline">¶</a></h3>
<p>By default the CORBA Java library (dcpscj.jar) that comes with OpenSplice is built with support for the 32-bit DDS_Time_t representation.
A new library dcpscj_y2038_ready.jar is added which supports the new 64-bit DDS_Time_t representation. This library can be used when
time stamps beyond year 2038 are needed.</p>
</div>
<div class="section" id="migration">
<span id="id30"></span><h3>2.6.3. Migration<a class="headerlink" href="#migration" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><em>client-durability</em></dt>
<dd>Users that use client-durability cannot use times beyond 2038. This is because the client
durability protocol uses DDS_Time_t in 32-bit. Also, Lite and Cafe do not support 64-bit yet.</dd>
<dt><em>DDS_Time_t in user data model</em></dt>
<dd>Users that currently use DDS_Time_t in their user-defined data structures cannot migrate a running system.
If they want to migrate, the complete system must be shut down and delete all storages containing the old
32-bit dds_time topics stored by the durability service. Rebuild the data models with the new 64-bit
dds_time topics and restart the system. Running a mixed environment with old and new dds_time structures
will result in topic mismatches.</dd>
<dt><em>Record and Replay (RnR) service</em></dt>
<dd>Users that use the Record and Replay service cannot use time beyond 2038. This is because the
RnR service uses 32-bit times in the provided api.</dd>
<dt><em>No client durability and no DDS_Time_t usage</em></dt>
<dd><p class="first">Customers that do not use DDS_Time_t in their user-defined data structures AND do not use
client durability can migrate in two steps:</p>
<blockquote class="last">
<div><ul class="simple">
<li>First update all nodes to minimal version 6.7 to be compatible with the 64-bit time stamps,
but don&#8217;t set the domain/y2038Ready option</li>
<li>If all nodes are running compatible versions, node by node can be changed to use 64-bit time stamps
by setting the domain/y2038Ready option to true.</li>
</ul>
</div></blockquote>
</dd>
</dl>
</div>
<div class="section" id="platform-support">
<span id="id31"></span><h3>2.6.4. Platform support<a class="headerlink" href="#platform-support" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Linux 64-bit: On 64-bit platforms linux already supports 64-bit time. No action required.</li>
<li>Linux 32-bit: On 32-bit platforms linux support for 64-bit time stamps is still in development.
To provide y2038 safe time in GLIBC it is proposed
that the user code defines _TIME_BITS=64 to get 64bit time support. When GLIBC sees _TIME_BITS=64 or when
the system is 64bit it will set __USE_TIME_BITS64 to indicate that it will use 64bit time.
Note that this is not yet supported. See: <a class="reference external" href="https://sourceware.org/glibc/wiki/Y2038ProofnessDesign?rev=83">https://sourceware.org/glibc/wiki/Y2038ProofnessDesign?rev=83</a></li>
<li>Windows: 64-bit time stamps are supported</li>
</ul>
<p><strong>NOTE</strong>: Network Time Protocol: (This is outside the scope of OpenSplice) When NTP is used then there may be a problem
that the time stamp will rollover in 2036. This may not be an issue when version 4 of the NTP protocol is
used which provides specification of an era number and era offset.</p>
</div>
<div class="section" id="dds-time-structure-change">
<span id="id32"></span><h3>2.6.5. DDS_Time structure change<a class="headerlink" href="#dds-time-structure-change" title="Permalink to this headline">¶</a></h3>
<p>The new DDS_Time representation which contains a 64-bit second field:</p>
<div class="highlight-python"><div class="highlight"><pre>module DDS {
    struct Time_t {
        long long sec;
        unsigned long nanosec;
    };
</pre></div>
</div>
<p>The original DDS_Time representation with a 32-bit second field:</p>
<div class="highlight-python"><div class="highlight"><pre>module DDS {
    struct Time_t {
        long sec;
        unsigned long nanosec;
    };
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/Vortex_logo_2014.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">2. Overview</a><ul>
<li><a class="reference internal" href="#vortex-opensplice-architecture">2.1. Vortex OpenSplice Architecture</a><ul>
<li><a class="reference internal" href="#single-process-architecture">2.1.1. Single Process architecture</a></li>
<li><a class="reference internal" href="#shared-memory-architecture">2.1.2. Shared Memory architecture</a></li>
<li><a class="reference internal" href="#comparison-of-deployment-architectures">2.1.3. Comparison of Deployment Architectures</a></li>
<li><a class="reference internal" href="#configuring-and-using-the-deployment-architectures">2.1.4. Configuring and Using the Deployment Architectures</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vortex-opensplice-usage">2.2. Vortex OpenSplice Usage</a><ul>
<li><a class="reference internal" href="#starting-vortex-opensplice-for-a-single-process-deployment">2.2.1. Starting Vortex OpenSplice for a Single Process Deployment</a></li>
<li><a class="reference internal" href="#starting-vortex-opensplice-for-a-shared-memory-deployment">2.2.2. Starting Vortex OpenSplice for a Shared Memory Deployment</a></li>
<li><a class="reference internal" href="#monitoring">2.2.3. Monitoring</a><ul>
<li><a class="reference internal" href="#diagnostic-messages">2.2.3.1. Diagnostic Messages</a></li>
<li><a class="reference internal" href="#vortex-opensplice-tuner">2.2.3.2. Vortex OpenSplice Tuner</a></li>
<li><a class="reference internal" href="#vortex-opensplice-memory-management-statistics-monitor">2.2.3.3. Vortex OpenSplice Memory Management Statistics Monitor</a></li>
</ul>
</li>
<li><a class="reference internal" href="#stopping-vortex-opensplice">2.2.4. Stopping Vortex OpenSplice</a><ul>
<li><a class="reference internal" href="#stopping-a-single-process-deployment">2.2.4.1. Stopping a Single Process deployment</a></li>
<li><a class="reference internal" href="#stopping-a-shared-memory-deployment">2.2.4.2. Stopping a Shared Memory deployment</a><ul>
<li><a class="reference internal" href="#stopping-ospl-by-using-signals">2.2.4.2.1. Stopping OSPL by using signals</a></li>
<li><a class="reference internal" href="#stopping-applications-in-shared-memory-mode">2.2.4.2.2. Stopping Applications in Shared Memory Mode</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#deploying-vortex-opensplice-on-vxworks-6-x">2.2.5. Deploying Vortex OpenSplice on VxWorks 6.x</a></li>
<li><a class="reference internal" href="#deploying-vortex-opensplice-on-integrity">2.2.6. Deploying Vortex OpenSplice on Integrity</a></li>
<li><a class="reference internal" href="#installing-uninstalling-the-vortex-opensplice-c-assembly-to-the-global-assembly-cache">2.2.7. Installing/Uninstalling the Vortex OpenSplice C# Assembly to the Global Assembly Cache</a><ul>
<li><a class="reference internal" href="#installing-the-c-assembly-to-the-global-assembly-cache">2.2.7.1. Installing the C# Assembly to the Global Assembly Cache</a></li>
<li><a class="reference internal" href="#uninstalling-the-c-assembly-from-the-global-assembly-cache">2.2.7.2. Uninstalling the C# Assembly from the Global Assembly Cache</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#vortex-opensplice-configuration">2.3. Vortex OpenSplice Configuration</a><ul>
<li><a class="reference internal" href="#configuration-files">2.3.1. Configuration Files</a></li>
<li><a class="reference internal" href="#environment-variables">2.3.2. Environment Variables</a><ul>
<li><a class="reference internal" href="#the-ospl-uri-environment-variable">2.3.2.1. The OSPL_URI environment variable</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration-of-single-process-deployment">2.3.3. Configuration of Single Process deployment</a></li>
<li><a class="reference internal" href="#configuration-of-shared-memory-deployment">2.3.4. Configuration of Shared Memory deployment</a></li>
<li><a class="reference internal" href="#temporary-files">2.3.5. Temporary Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#applications-which-operate-in-multiple-domains">2.4. Applications which operate in multiple domains</a><ul>
<li><a class="reference internal" href="#interaction-with-a-networking-service">2.4.1. Interaction with a Networking Service</a></li>
</ul>
</li>
<li><a class="reference internal" href="#time-jumps">2.5. Time-jumps</a><ul>
<li><a class="reference internal" href="#effect-on-data">2.5.1. Effect on data</a></li>
<li><a class="reference internal" href="#effect-on-processing">2.5.2. Effect on processing</a></li>
<li><a class="reference internal" href="#background-information">2.5.3. Background information</a></li>
</ul>
</li>
<li><a class="reference internal" href="#time-stamps-and-year-2038-limit">2.6. Time stamps and year 2038 limit</a><ul>
<li><a class="reference internal" href="#corba-c">2.6.1. CORBA C++</a></li>
<li><a class="reference internal" href="#corba-java">2.6.2. CORBA Java</a></li>
<li><a class="reference internal" href="#migration">2.6.3. Migration</a></li>
<li><a class="reference internal" href="#platform-support">2.6.4. Platform support</a></li>
<li><a class="reference internal" href="#dds-time-structure-change">2.6.5. DDS_Time structure change</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="preface.html"
                        title="previous chapter">1. Preface</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="service-feature-list.html"
                        title="next chapter">3. Service Descriptions</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/overview.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="service-feature-list.html" title="3. Service Descriptions"
             >next</a> |</li>
        <li class="right" >
          <a href="preface.html" title="1. Preface"
             >previous</a> |</li>
        <li><a href="index.html">Deployment Guide</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2017, PrismTech.
    </div>
  </body>
</html>