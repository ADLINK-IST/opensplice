<HTML>
<HEAD>
<TITLE>test_ospl.xml</TITLE>
</HEAD>
<BODY>

<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD BGCOLOR="#EEEEFF">
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
<TR ALIGN="center" VALIGN="top">
<TD>&nbsp;<A HREF="../overview-summary.html"><B>Overview</B></A>&nbsp;</TD>
<TD>&nbsp;<A HREF="package-overview.html"><B>Package</B>&nbsp;</TD>
<TD BGCOLOR="#00008B">&nbsp;<FONT color="EEEEFF"><B>&nbsp;File&nbsp;</B></FONT>&nbsp;</TD>
</TR>
</TABLE>

</TD>
<TD ALIGN="right"><FONT size="-1"><I><B>generated with<br>STAXDoc v1.0.4</B></I></FONT></TD>
</TR>
</TABLE>
<HR>

<H1>test_ospl.xml</H1>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF">
<TD COLSPAN="2"><FONT SIZE="+2"><B>Function Summary</B></FONT></TD>
</TR>

  
  
<TR>
<TD style="vertical-align: top;"><CODE><B><A HREF="#Initialise">Initialise</A></B></CODE></TD><TD>
      
      This function must be called first in all functions or jobs.
        </TD>
</TR>

  
<TR>
<TD style="vertical-align: top;"><CODE><B><A HREF="#GetEnv">GetEnv</A></B></CODE></TD><TD>
      
      Gets an environment value from a TestNode
      
    </TD>
</TR>

  
<TR>
<TD style="vertical-align: top;"><CODE><B><A HREF="#patch_release_dot_com">patch_release_dot_com</A></B></CODE></TD><TD>
      
      Check that the release.
        </TD>
</TR>

  
<TR>
<TD style="vertical-align: top;"><CODE><B><A HREF="#InitialiseNode">InitialiseNode</A></B></CODE></TD><TD>
      
      Initialise required data values of a particular TestNode within the current TestRun
      This will query the node for system variables and determine the required environment variables
      for a particular OSPL_HOME on that Node.
        </TD>
</TR>

  
<TR>
<TD style="vertical-align: top;"><CODE><B><A HREF="#StartOSPL">StartOSPL</A></B></CODE></TD><TD>
      
      Starts OpenSplice on a node.
        </TD>
</TR>

  
<TR>
<TD style="vertical-align: top;"><CODE><B><A HREF="#OSPLIsRunning">OSPLIsRunning</A></B></CODE></TD><TD>
      
        Checks to see if OpenSplice is (already / now) running on a Node
      
    </TD>
</TR>

  
<TR>
<TD style="vertical-align: top;"><CODE><B><A HREF="#StopOSPL">StopOSPL</A></B></CODE></TD><TD>
      
      Stop OpenSplice on a TestNode.
        </TD>
</TR>

  
<TR>
<TD style="vertical-align: top;"><CODE><B><A HREF="#RetrieveProcessLog">RetrieveProcessLog</A></B></CODE></TD><TD>
      
      Manually retrieves process's logs.
        </TD>
</TR>

  
<TR>
<TD style="vertical-align: top;"><CODE><B><A HREF="#RunProcess">RunProcess</A></B></CODE></TD><TD>
      
      Runs a Process on a TestNode 'synchronously'.
        </TD>
</TR>

  
<TR>
<TD style="vertical-align: top;"><CODE><B><A HREF="#RunOSPLStart">RunOSPLStart</A></B></CODE></TD><TD>
      
      Starts OpenSplice on a node.
        </TD>
</TR>

  
<TR>
<TD style="vertical-align: top;"><CODE><B><A HREF="#RunOSPLStop">RunOSPLStop</A></B></CODE></TD><TD>
      
      Stops OpenSplice on a node.
        </TD>
</TR>

  
<TR>
<TD style="vertical-align: top;"><CODE><B><A HREF="#SpawnProcess">SpawnProcess</A></B></CODE></TD><TD>
      
      Asynchronously spawns a process without waiting for it to complete and returns the handle to the user & stores it
      on the passed Process.
        </TD>
</TR>

  
<TR>
<TD style="vertical-align: top;"><CODE><B><A HREF="#CheckProcessComplete">CheckProcessComplete</A></B></CODE></TD><TD>
      
      Check an asynchronously started process has completed successfully with return code 0.
        </TD>
</TR>

  
<TR>
<TD style="vertical-align: top;"><CODE><B><A HREF="#PASS-if-0">PASS-if-0</A></B></CODE></TD><TD>
      This function checks if a value is 0.
        </TD>
</TR>




</TABLE><BR><BR>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF">
<TD COLSPAN="2"><FONT SIZE="+2"><B>STAX Function Details</B></FONT></TD>
</TR>
</TABLE>

  
  <A NAME="Initialise"></A><h2>
<u>Initialise</u>
</h2><p>
      
      This function must be called first in all functions or jobs. It initialises variables,
      does various STAX and STAF jiggery pokery, and
      sets up the Python import path and imports the test classes module.
      
    </p><p>
<table BORDER="1">
<tbody>
<tr>
<td COLSPAN="2"><b>This function does not allow any arguments</b></td>
</tr>
</tbody>
</table>
</p><p>
      
        The scope of this funcion is global rather than local so variables created
        here are all effectively exported. To avoid conflicts with variables in jobs prefix all
        used in local working with init_* and try and keep them to a min to avoid
        debugger clutter.
      
    </p><hr WIDTH="100%">

  <A NAME="GetEnv"></A><h2>
<u>GetEnv</u>
</h2><p>
      
      Gets an environment value from a TestNode
      
    </p><p>
<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<thead>
<tr>
<th COLSPAN="6"><b>This function takes a list of arguments</b></th>
</tr>
<tr>
<th><b>Name</b></th><th><b>Description</b></th><th><b>Required</b></th><th><b>Private</b></th><th><b>Default</b></th><th><b>Properties</b></th>
</tr>
</thead>
<tbody>
      
<tr>
<td style="vertical-align: top;">the_node</td><td>
<p>
        Which TestNode to request the variable from
      </p>
</td><td>Yes</td><td>No</td><td>N/A</td><td></td>
</tr>
      
<tr>
<td style="vertical-align: top;">the_variable_name</td><td>
<p>
        The env variable name required.
      </p>
</td><td>Yes</td><td>No</td><td>N/A</td><td></td>
</tr>
    
</tbody>
</table>
</p><p>
      
        Returns the variable value or empty string if it can't be resoved on the box.
      
    </p><hr WIDTH="100%">

  <A NAME="patch_release_dot_com"></A><h2>
<u>patch_release_dot_com</u>
</h2><p>
      
      Check that the release.com script on posix platforms has had the
      @@INSTALLDIR@@ token removed and is executable.
      
    </p><p>
<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<thead>
<tr>
<th COLSPAN="6"><b>This function takes a list of arguments</b></th>
</tr>
<tr>
<th><b>Name</b></th><th><b>Description</b></th><th><b>Required</b></th><th><b>Private</b></th><th><b>Default</b></th><th><b>Properties</b></th>
</tr>
</thead>
<tbody>
      
<tr>
<td style="vertical-align: top;">the_node</td><td>
<p>
        Which TestNode to do the check on
      </p>
</td><td>Yes</td><td>No</td><td>N/A</td><td></td>
</tr>
      
<tr>
<td style="vertical-align: top;">the_ospl_home</td><td>
<p>
        Optionally specify / override the OSPL_HOME to check. If not supplied use the
        value set globaslly for this node within this run.
      </p>
</td><td>No</td><td>No</td><td>''</td><td></td>
</tr>
    
</tbody>
</table>
</p><p>
      
      Will replace the token and apply the permission if not.
      
    </p><hr WIDTH="100%">

  <A NAME="InitialiseNode"></A><h2>
<u>InitialiseNode</u>
</h2><p>
      
      Initialise required data values of a particular TestNode within the current TestRun
      This will query the node for system variables and determine the required environment variables
      for a particular OSPL_HOME on that Node.
      
    </p><p>
<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<thead>
<tr>
<th COLSPAN="6"><b>This function takes a single argument</b></th>
</tr>
<tr>
<th><b>Name</b></th><th><b>Description</b></th><th><b>Required</b></th><th><b>Private</b></th><th><b>Default</b></th><th><b>Properties</b></th>
</tr>
</thead>
<tbody>
      
<tr>
<td style="vertical-align: top;">the_node</td><td>
<p>
        The TestNode that should be initialised
      </p>
</td><td>Yes</td><td>No</td><td>N/A</td><td></td>
</tr>
    
</tbody>
</table>
</p><p>
      
      This only needs doing opnce per TestNode but it shouldn't do any harm if it's repeated. Other
      than contributing to general patience trying.
      
    </p><hr WIDTH="100%">

  <A NAME="StartOSPL"></A><h2>
<u>StartOSPL</u>
</h2><p>
      
      Starts OpenSplice on a node. Optionally with a specific domain config.
      
    </p><p>
<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<thead>
<tr>
<th COLSPAN="6"><b>This function takes a list of arguments</b></th>
</tr>
<tr>
<th><b>Name</b></th><th><b>Description</b></th><th><b>Required</b></th><th><b>Private</b></th><th><b>Default</b></th><th><b>Properties</b></th>
</tr>
</thead>
<tbody>
      
<tr>
<td style="vertical-align: top;">the_node</td><td>
<p>
        Which TestNode instance to start OSPL on
      </p>
</td><td>Yes</td><td>No</td><td>N/A</td><td></td>
</tr>
      
<tr>
<td style="vertical-align: top;">the_scenario</td><td>
<p>
        The TestScenario being run.
      </p>
</td><td>Yes</td><td>No</td><td>N/A</td><td></td>
</tr>
      
<tr>
<td style="vertical-align: top;">ospl_conf_file</td><td>
<p>
        The file 'URL' of the OSPL config file. Note - this is not a real URL (i.e. it must be machine
        local on the target machine, not a path on your machine or the STAX controller).
        If not specified then OSPL is started with the default file as specified by the env property.
      </p>
</td><td>No</td><td>No</td><td>''</td><td></td>
</tr>
      
<tr>
<td style="vertical-align: top;">ospl_work_dir</td><td>
<p>
        A directory to start OSPL in. If you're not using default test locations it's important to set
        this if you want to be able to retrieve the ospl logs.
      </p>
</td><td>No</td><td>No</td><td>''</td><td></td>
</tr>
    
</tbody>
</table>
</p><p>
      
      Returns a STAXResult of 0 on successful start or if the splice daemon was already running.
      
    </p><hr WIDTH="100%">

  <A NAME="OSPLIsRunning"></A><h2>
<u>OSPLIsRunning</u>
</h2><p>
      
        Checks to see if OpenSplice is (already / now) running on a Node
      
    </p><p>
<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<thead>
<tr>
<th COLSPAN="6"><b>This function takes a list of arguments</b></th>
</tr>
<tr>
<th><b>Name</b></th><th><b>Description</b></th><th><b>Required</b></th><th><b>Private</b></th><th><b>Default</b></th><th><b>Properties</b></th>
</tr>
</thead>
<tbody>
      
<tr>
<td style="vertical-align: top;">the_node</td><td>
<p>
        Which node to check
      </p>
</td><td>Yes</td><td>No</td><td>N/A</td><td></td>
</tr>
      
<tr>
<td style="vertical-align: top;">ospl_conf_file</td><td>
<p>
        The file 'URL' of the OSPL config file. Note - this is not a real URL (i.e. it must be machine
        local on the target machine, not a path on your machine or the STAX controller).
        If not specified then OSPL is started with the default file as specified by the env property.
      </p>
</td><td>No</td><td>No</td><td>''</td><td></td>
</tr>
    
</tbody>
</table>
</p><p>
      
        Calls ospl list for the specified doamin URI and returns true if the
        result is > 0.
      
    </p><hr WIDTH="100%">

  <A NAME="StopOSPL"></A><h2>
<u>StopOSPL</u>
</h2><p>
      
      Stop OpenSplice on a TestNode. Optionally with a specific domain config or stop the default instance otherwise.
      
    </p><p>
<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<thead>
<tr>
<th COLSPAN="6"><b>This function takes a list of arguments</b></th>
</tr>
<tr>
<th><b>Name</b></th><th><b>Description</b></th><th><b>Required</b></th><th><b>Private</b></th><th><b>Default</b></th><th><b>Properties</b></th>
</tr>
</thead>
<tbody>
      
<tr>
<td style="vertical-align: top;">the_node</td><td>
<p>
        Which TestNode instance to stop OSPL on
      </p>
</td><td>Yes</td><td>No</td><td>N/A</td><td></td>
</tr>
      
<tr>
<td style="vertical-align: top;">the_scenario</td><td>
<p>
        The TestScenario being run currently.
      </p>
</td><td>Yes</td><td>No</td><td>N/A</td><td></td>
</tr>
      
<tr>
<td style="vertical-align: top;">ospl_conf_file</td><td>
<p>
        The file 'URL' of the OSPL config file. Note - this is not a real URL (i.e. it must be machine
        local on the target machine, not a path on your machine or the STAX controller box).
        If not specified then OSPL is started with the default file as specified by the OSPL_URI env property over there.
      </p>
</td><td>No</td><td>No</td><td>''</td><td></td>
</tr>
      
<tr>
<td style="vertical-align: top;">ospl_work_dir</td><td>
<p>
        A directory to start OSPL in. If you're not using default test locations for some reason it's important to set
        this if you want to be able to retrieve the ospl logs.
      </p>
</td><td>No</td><td>No</td><td>''</td><td></td>
</tr>
    
</tbody>
</table>
</p><p>
      
      Returns a STAXResult of 0 on successful stop or if the splice daemon had already stopped running. Throws and exception
      otherwise.
      
    </p><hr WIDTH="100%">

  <A NAME="RetrieveProcessLog"></A><h2>
<u>RetrieveProcessLog</u>
</h2><p>
      
      Manually retrieves process's logs.
      
    </p><p>
<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<thead>
<tr>
<th COLSPAN="6"><b>This function takes a list of arguments</b></th>
</tr>
<tr>
<th><b>Name</b></th><th><b>Description</b></th><th><b>Required</b></th><th><b>Private</b></th><th><b>Default</b></th><th><b>Properties</b></th>
</tr>
</thead>
<tbody>
      
<tr>
<td style="vertical-align: top;">the_process</td><td>
<p>
        The Process instance that we need the logs for
      </p>
</td><td>Yes</td><td>No</td><td>N/A</td><td></td>
</tr>
    
</tbody>
</table>
</p><p>
      
      Retrieves the stdout & stdin output file created by the process from the remote machine
      back to the monitoring node.
      
    </p><hr WIDTH="100%">

  <A NAME="RunProcess"></A><h2>
<u>RunProcess</u>
</h2><p>
      
      Runs a Process on a TestNode 'synchronously'. Process should be expected to complete within a reasonable time.
      Will timeout otherwise. Optional timeout can be specified.
      
    </p><p>
<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<thead>
<tr>
<th COLSPAN="6"><b>This function takes a list of arguments</b></th>
</tr>
<tr>
<th><b>Name</b></th><th><b>Description</b></th><th><b>Required</b></th><th><b>Private</b></th><th><b>Default</b></th><th><b>Properties</b></th>
</tr>
</thead>
<tbody>
      
<tr>
<td style="vertical-align: top;">the_process</td><td>
<p>
        The Process instance thatshould be run
      </p>
</td><td>Yes</td><td>No</td><td>N/A</td><td></td>
</tr>
      
<tr>
<td style="vertical-align: top;">the_timeout</td><td>
<p>
        A timeout to wait for the process to complete.
      </p>
</td><td>No</td><td>No</td><td>'60s'</td><td></td>
</tr>
    
</tbody>
</table>
</p><p>
      
      Will return Process return code on successful completion. Will throw an exception if it times out or cannot
      be run for some reason.
      
    </p><hr WIDTH="100%">

  <A NAME="RunOSPLStart"></A><h2>
<u>RunOSPLStart</u>
</h2><p>
      
      Starts OpenSplice on a node.      
    </p><p>
<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<thead>
<tr>
<th COLSPAN="6"><b>This function takes a list of arguments</b></th>
</tr>
<tr>
<th><b>Name</b></th><th><b>Description</b></th><th><b>Required</b></th><th><b>Private</b></th><th><b>Default</b></th><th><b>Properties</b></th>
</tr>
</thead>
<tbody>
      
<tr>
<td style="vertical-align: top;">location</td><td>
<p>
        The STAF URL of the machine of which you wish to start OpenSplice DDS on
      </p>
</td><td>No</td><td>No</td><td>'local'</td><td></td>
</tr>
      
<tr>
<td style="vertical-align: top;">test_directory</td><td>
<p>
        Set a working directory where OSPL will be started. This is done to ensure the logs go somewhere logical.
        If this is not set to they'll end up whereever STAF was started from.
      </p>
</td><td>No</td><td>No</td><td>''</td><td></td>
</tr>
      
<tr>
<td style="vertical-align: top;">ospl_conf_file</td><td>
<p>
        The file 'URL' of the OSPL config file. Note - this is not a real URL (i.e. it must be machine local on the target machine).
        If not specified then OSPL is started with the default file as specified by the env property.
      </p>
</td><td>No</td><td>No</td><td>''</td><td></td>
</tr>
    
</tbody>
</table>
</p><p>
      

      
    </p><hr WIDTH="100%">

  <A NAME="RunOSPLStop"></A><h2>
<u>RunOSPLStop</u>
</h2><p>
      
      Stops OpenSplice on a node.
      Note 'ospl -a stop' is not supported as it is evil.
      If you want to do that go spawn yourself a process.
      
    </p><p>
<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<thead>
<tr>
<th COLSPAN="6"><b>This function takes a list of arguments</b></th>
</tr>
<tr>
<th><b>Name</b></th><th><b>Description</b></th><th><b>Required</b></th><th><b>Private</b></th><th><b>Default</b></th><th><b>Properties</b></th>
</tr>
</thead>
<tbody>
      
<tr>
<td style="vertical-align: top;">location</td><td>
<p>
        The STAF daemon URI of the machine of which you wish to stop an OpenSplice DDS domain on.
      </p>
</td><td>No</td><td>No</td><td>'local'</td><td></td>
</tr>

      
<tr>
<td style="vertical-align: top;">ospl_conf_file</td><td>
<p>
        The optional file 'URL' of the OSPL domain config file. Note - this is not a real URL (i.e. it must be machine local).
        If not specified then OSPL is started with the default file as specified by the OSPL_URI env property.
      </p>
</td><td>No</td><td>No</td><td>''</td><td></td>
</tr>

    
</tbody>
</table>
</p><p>
      

      
    </p><hr WIDTH="100%">

  <A NAME="SpawnProcess"></A><h2>
<u>SpawnProcess</u>
</h2><p>
      
      Asynchronously spawns a process without waiting for it to complete and returns the handle to the user & stores it
      on the passed Process.
      
    </p><p>
<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<thead>
<tr>
<th COLSPAN="6"><b>This function takes a list of arguments</b></th>
</tr>
<tr>
<th><b>Name</b></th><th><b>Description</b></th><th><b>Required</b></th><th><b>Private</b></th><th><b>Default</b></th><th><b>Properties</b></th>
</tr>
</thead>
<tbody>
      
<tr>
<td style="vertical-align: top;">the_process</td><td>
<p>
        The command of the process you want to start.
      </p>
</td><td>Yes</td><td>No</td><td>N/A</td><td></td>
</tr>
    
</tbody>
</table>
</p><p>
      
        Will throw an exception if the process fails to start.
      
    </p><hr WIDTH="100%">

  <A NAME="CheckProcessComplete"></A><h2>
<u>CheckProcessComplete</u>
</h2><p>
      
      Check an asynchronously started process has completed successfully with return code 0.
      Terminate it if it hasn't.
      
    </p><p>
<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<thead>
<tr>
<th COLSPAN="6"><b>This function takes a list of arguments</b></th>
</tr>
<tr>
<th><b>Name</b></th><th><b>Description</b></th><th><b>Required</b></th><th><b>Private</b></th><th><b>Default</b></th><th><b>Properties</b></th>
</tr>
</thead>
<tbody>
      
<tr>
<td style="vertical-align: top;">the_process</td><td>
<p>
        The Process  instance you want to check and stop.
      </p>
</td><td>Yes</td><td>No</td><td>N/A</td><td></td>
</tr>
    
</tbody>
</table>
</p><p>
      
        Will record an error and return the process RC if it hadn't terminated itself and returned 0.
        Will free handle resources in at all possible. Will only throw exception if the STAF service
        cannot be contacted.
      
    </p><hr WIDTH="100%">

  <A NAME="PASS-if-0"></A><h2>
<u>PASS-if-0</u>
</h2><p>
      This function checks if a value is 0.  If 0, it sets the
      testcase status result to 'pass'; otherwise, it sets it
      to 'fail' and sends a message to the STAXMonitor.
    </p><p>
<table BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<thead>
<tr>
<th COLSPAN="6"><b>This function takes a single argument</b></th>
</tr>
<tr>
<th><b>Name</b></th><th><b>Description</b></th><th><b>Required</b></th><th><b>Private</b></th><th><b>Default</b></th><th><b>Properties</b></th>
</tr>
</thead>
<tbody>
      
<tr>
<td style="vertical-align: top;">value</td><td>
<p>
        Value to compare with 0
      </p>
</td><td>Yes</td><td>No</td><td>N/A</td><td></td>
</tr>
    
</tbody>
</table>
</p><hr WIDTH="100%">



</body></html>